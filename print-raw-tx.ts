import { ElectrumNetworkProvider } from 'cashscript';
import {
  hexToBin,
  decodeTransaction,
  Transaction as LibauthTransaction,
  stringify,
} from '@bitauth/libauth';

run();

async function run(): Promise<void> {
  const provider = new ElectrumNetworkProvider('testnet');

  const txHex = process.argv[2];
  console.log('txHex:', txHex);

  // const hex = '0100000001affe4043e0ade6f3deebd8213d4c46783f05fb399ae70b7b649114062928875c00000000fdd0011499c7e0b48a05cd6024b22cd490fcee30aa51d86247304402207389986a5c9a6e8947fb46328794223058366238e7792789db4a672b67ba245902202da7f568988b7cad505f499f2d0eda8cd104990311f8127ccb0df1c01d5f661741483045022100d74e775719cc5001928e7d0ffbca1154b00b89bc6c652ad9e9aae218480be6d502202cae5dec5b2b0fe5298f666f208fe6210c96251205ff6074f43a4b63c95ff7a341004d260121021d820f99bee3a94f26f3797af7d0589ebfc31999824cfbda935a508957ab72ac2102f51c5abd464c06c0669c39e88e72060e3eed983c6ccb1201cad6e25c642a0ef92103fdec69ef6ec640264045229ca7cf0f170927b87fc8d2047844f8a766ead467e421035c0a0cb8987290ea0a7a926e8aa8978ac042b4c0be8553eb4422461ce1a17cd82102d86b49e3424e557beebf67bd06842cdb88e314c44887f3f265b7f81107dd69945579009c6300567a577a52537a717c53afc3519dc4519d00cd0376a914557a7e0288ac7e87777777675579519c6300567a577a52537a717c53af00c600cc9d00cd02a914557a7e01877e8777777767557a529d00557a51557a567a52af00c600cc9d00cd02a914557a7e01877e885601189502b40095b26d6d516868ffffffff0188130000000000001976a91499c7e0b48a05cd6024b22cd490fcee30aa51d86288ac00000000';
  console.log(txHex);

  const libauthTransaction = decodeTransaction(hexToBin(txHex)) as LibauthTransaction;
  const tx = { ...libauthTransaction, txHex };
  console.log(stringify(tx));
}
